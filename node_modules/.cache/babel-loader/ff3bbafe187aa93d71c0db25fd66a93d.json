{"remainingRequest":"/home/tal/development/vue-scaffold/node_modules/babel-loader/lib/index.js!/home/tal/development/vue-scaffold/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tal/development/vue-scaffold/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tal/development/vue-scaffold/src/views/ChatRoom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tal/development/vue-scaffold/src/views/ChatRoom.vue","mtime":1599596288874},{"path":"/home/tal/development/vue-scaffold/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tal/development/vue-scaffold/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/tal/development/vue-scaffold/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tal/development/vue-scaffold/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS90YWwvZGV2ZWxvcG1lbnQvdnVlLXNjYWZmb2xkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwoKdmFyIGF4aW9zID0gcmVxdWlyZSgiYXhpb3MiKTsKCmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2hhdFJvb20iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlOiAiIiwKICAgICAgcm9vbU51bTogdGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXJhbXMucm9vbUlkLAogICAgICB1c2Vyc0luUm9vbTogW10KICAgIH07CiAgfSwKICBwcm9wczoge30sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0Q2hhdFRleHQoKTsKICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsKICAgIHRoaXMuZ2V0QWxsVXNlcnMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNjcm9sbFRvRW5kOiBmdW5jdGlvbiBzY3JvbGxUb0VuZCgpIHsKICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoIiNsaXN0T2ZUZXh0Iik7CiAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsSGVpZ2h0OwogICAgfSwKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm1lc3NhZ2UgIT09ICIiKSB7CiAgICAgICAgYXhpb3MucG9zdCgiL3Jvb21zLyIuY29uY2F0KHRoaXMucm9vbU51bSwgIi90ZXh0IiksIHsKICAgICAgICAgIHRleHQ6IHRoaXMubWVzc2FnZSwKICAgICAgICAgIHVzZXJJZDogdGhpcy5sb2dnZWRpblVzZXIuaWQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLmdldENoYXRUZXh0KCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldENoYXRUZXh0OiBmdW5jdGlvbiBnZXRDaGF0VGV4dCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBheGlvcy5nZXQoIi9yb29tcy8iLmNvbmNhdCh0aGlzLnJvb21OdW0sICIvdGV4dCIpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBySWQgPSBfdGhpczIuJHJvdXRlci5jdXJyZW50Um91dGUucGFyYW1zLnJvb21JZDsKICAgICAgICB2YXIgY2hhdERhdGEgPSBbXTsKICAgICAgICBjaGF0RGF0YVtySWRdID0gcmVzcG9uc2UuZGF0YS50ZXh0OwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCJyb29tcy9zZXRDaGF0RGF0YSIsIGNoYXREYXRhKTsKCiAgICAgICAgX3RoaXMyLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLnNjcm9sbFRvRW5kKCk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRVc2VyTGlzdDogZnVuY3Rpb24gZ2V0VXNlckxpc3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCIvcm9vbXMvIi5jb25jYXQodGhpcy5yb29tTnVtLCAiL3VzZXJzIikpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLnVzZXJzSW5Sb29tID0gbmV3IFNldChyZXNwb25zZS5kYXRhLnVzZXJzKTsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgicm9vbXMvc2V0VXNlcnMiLCByZXNwb25zZS5kYXRhLnVzZXJzKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIGdldEFsbFVzZXJzOiBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHsKICAgICAgYXhpb3MuZ2V0KCIvdXNlcnMiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCJyb29tcy9zZXRBbGxVc2VycyIsIHJlc3BvbnNlLmRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyh7CiAgICBjaGF0RGF0YTogInJvb21zL2NoYXREYXRhIiwKICAgIHVzZXJzTGlzdDogInJvb21zL3VzZXJzTGlzdCIsCiAgICBhbGxVc2Vyc0xpc3Q6ICJyb29tcy9hbGxVc2Vyc0xpc3QiLAogICAgbG9nZ2VkaW5Vc2VyOiAicm9vbXMvbG9nZ2VkaW5Vc2VyIgogIH0pKQp9Ow=="},{"version":3,"sources":["ChatRoom.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"chatRoom\">\n    <v-navigation-drawer :permanent=\"true\" absolute dark fixed :width=\"150\">\n      <v-list dense nav>\n        <v-list-item two-line>\n          <v-list-item-content>\n            <v-list-item-title></v-list-item-title>\n          </v-list-item-content>\n        </v-list-item>\n        <v-list-item-subtitle>users</v-list-item-subtitle>\n        <v-divider></v-divider>\n        <v-list-item v-for=\"item in usersInRoom\" :key=\"item.id\" link>\n          <v-list-item-content v-if=\"allUsersList[item]\">\n            <v-list-item-title>{{ allUsersList[item].name }}</v-list-item-title>\n          </v-list-item-content>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n    <v-list>\n      <v-list-item-group>\n        <v-list id=\"listOfText\" class=\"overflow-y-auto\" style=\"max-height: 85vh;\" two-line>\n          <template v-for=\"(item, index) in chatData[this.$router.currentRoute.params.roomId]\">\n            <v-list-item :key=\"index\">\n              <v-list-item-avatar>\n                <img src=\"@/assets/puppy.jpg\" />\n              </v-list-item-avatar>\n              <v-list-item-content v-if=\"allUsersList[item.userId]\">\n                <v-list-item-title v-html=\"allUsersList[item.userId].name\"></v-list-item-title>\n                <v-list-item-subtitle v-html=\"item.text\"></v-list-item-subtitle>\n              </v-list-item-content>\n            </v-list-item>\n          </template>\n        </v-list>\n      </v-list-item-group>\n    </v-list>\n\n    <v-footer style=\"height: 10vh;\" dark fixed>\n      <v-row justify=\"center\" no-gutters>\n        <form @submit.prevent=\"onSubmit\">\n          <v-text-field\n            v-model=\"message\"\n            style=\" display: inline-block;\"\n            label=\"Message\"\n            on:submit.prevent=\"onSubmit\"\n          ></v-text-field>\n          <v-btn\n            type=\"submit\"\n            class=\"ma-2\"\n            style=\" display: inline-block;\"\n            outlined\n            color=\"white\"\n          >Send</v-btn>\n        </form>\n      </v-row>\n    </v-footer>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nconst axios = require(\"axios\");\nimport store from \"../store\";\n\nexport default {\n  name: \"ChatRoom\",\n  data() {\n    return {\n      message: \"\",\n      roomNum: this.$router.currentRoute.params.roomId,\n      usersInRoom: [],\n    };\n  },\n  props: {},\n  mounted() {\n    this.getChatText();\n    this.getUserList();\n    this.getAllUsers();\n  },\n  methods: {\n    scrollToEnd: function () {\n      var container = this.$el.querySelector(\"#listOfText\");\n      container.scrollTop = container.scrollHeight;\n    },\n    onSubmit() {\n      if (this.message !== \"\") {\n        axios\n          .post(`/rooms/${this.roomNum}/text`, {\n            text: this.message,\n            userId: this.loggedinUser.id,\n          })\n          .then(() => {\n            this.getChatText();\n          })\n          .catch(function (error) {\n            console.error(error);\n          });\n      }\n    },\n    getChatText() {\n      axios\n        .get(`/rooms/${this.roomNum}/text`)\n        .then((response) => {\n          let rId = this.$router.currentRoute.params.roomId;\n          let chatData = [];\n          chatData[rId] = response.data.text;\n          store.dispatch(\"rooms/setChatData\", chatData);\n          this.$nextTick(function () {\n            this.scrollToEnd();\n          });\n        })\n        .catch(function (error) {\n          console.error(error);\n        });\n    },\n    getUserList() {\n      axios\n        .get(`/rooms/${this.roomNum}/users`)\n        .then((response) => {\n          this.usersInRoom = new Set(response.data.users);\n          store.dispatch(\"rooms/setUsers\", response.data.users);\n        })\n        .catch(function (error) {\n          console.error(error);\n        });\n    },\n\n    getAllUsers() {\n      axios\n        .get(`/users`)\n        .then((response) => {\n          store.dispatch(\"rooms/setAllUsers\", response.data);\n        })\n        .catch(function (error) {\n          console.error(error);\n        });\n    },\n  },\n  computed: {\n    ...mapGetters({\n      chatData: \"rooms/chatData\",\n      usersList: \"rooms/usersList\",\n      allUsersList: \"rooms/allUsersList\",\n      loggedinUser: \"rooms/loggedinUser\",\n    }),\n  },\n};\n</script>\n\n<style scoped>\n.chatRoom {\n  margin-left: 150px;\n  height: 90vh;\n}\n</style>\n"],"sourceRoot":"src/views"}]}